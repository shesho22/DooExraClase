<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>WorkBot - Rutinas</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container px-4 px-lg-5">
                <a class="navbar-brand" href="index.html">WorkBot</a>
            </div>
        </nav>
        <header class="bg-dark py-5 mb-5">
            <div class="container px-4 px-lg-5 my-5">
                <div class="text-center text-white">
                    <h1 class="display-4 fw-bolder">Entrenamiento</h1>
                    <p class="lead fw-normal text-white-50 mb-0">... ¡Para ayudarte cumplir tu meta!</p>
                </div>
            </div>
        </header>
		<div class="container mb-5">
			<div class="row">
				<div class="col-md-6">
					<div class="card">
						<div class="card-body">
							<h2><i class="bi bi-person-circle fa-10x"></i> INFORMACIÓN</h2>
							<div class="d-flex align-items-center">
								<div>
									<p><strong>NOMBRE ─ </strong><span id="trainer-fullname"></span></p>
									<p><strong>EMAIL ─ </strong><span id="trainer-email"></span></p>
									<p><strong>TELEFONO ─ </strong><span id="trainer-phone"></span></p>
									<!--<p><strong>FECHA NACIMIENTO ─ </strong><span id="trainer-birthdate"></span></p>-->
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="card">
						<div class="card-body">
							<h2><i class="bi bi-person-walking fa-10x"></i> RUTINAS</h2>
							<ul id="routine-list" class="list-group"></ul>
						</div>
					</div>
				</div>
			</div>
		</div>

        <footer class="py-5 bg-dark">
            <div class="container"><p class="m-0 text-center text-white">Sergio Arias R. / Steven Alejandro R. / Jacobo Jaramillo J. - 2023</p></div>
        </footer>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <script>
			//console.log(sessionStorage.getItem('currentTrainerData'));
			//alert( sessionStorage.getItem('test') );
			//const retrievedTrainerData = JSON.parse(retrievedTrainerDataString);
			
			/*
			const trainerInfo = {
				fullName: "John John Doe Doe",
				emailAddress: "johndoe@example.com",
				phoneNumber: "123-456-7890",
				//birthDate: "1/1/1990",
			};
			*/
			//const trainerData = sessionStorage.getItem('currentTrainerData');
			const trainerInfo = JSON.parse(sessionStorage.getItem('currentTrainerData'));
			
			//TODO: conexion a backend
			const routines = [
				{
					id: 1,
					name: "Cardio",
					trainer: "123",
					exercises: [
						{
							id: 1,
							name: "Flexiones",
							description: "Coloca las manos a la anchura de los hombros y mantén el cuerpo en línea recta.",
							series: 3,
							repetitions: 15,
						},
						{
							id: 2,
							name: "Sentadillas",
							description: "Ponte de pie con los pies separados a la altura de los hombros y ponte en cuclillas, manteniendo la espalda recta.",
							series: 3,
							repetitions: 12,
						},
					],
				},
				{
					id: 2,
					name: "Pesos",
					trainer: "123",
					exercises: [
						{
							id: 3,
							name: "Downward-Facing Dog",
							description: "Consiste en empezar sobre las manos y las rodillas y luego levantar las caderas hacia arriba, formando una V invertida.",
							series: 3,
							repetitions: 15,
						},
						{
							id: 4,
							name: "Child's Pose",
							description: "En esta postura, te arrodillas en el suelo, te sientas sobre los talones y extiendes los brazos hacia delante mientras bajas la frente hacia la esterilla.",
							series: 3,
							repetitions: 12,
						},
					],
				},
			];

			function populateTrainerInfo() {
				document.getElementById("trainer-fullname").textContent = trainerInfo.name.firstName + " " + trainerInfo.name.secondName + " " + trainerInfo.name.firstLastName + " " + trainerInfo.name.secondLastName;
				document.getElementById("trainer-email").textContent = trainerInfo.emailAddress;
				document.getElementById("trainer-phone").textContent = trainerInfo.phoneNumber;
			}

			function populateRoutines() {
			
				const routineList = document.getElementById("routine-list");
				routines.forEach((routine) => {
					const listItem = document.createElement("li");
					listItem.className = "list-group-item d-flex justify-content-between align-items-center";
					
					listItem.innerHTML = `<span>${routine.name}</span>`;
					
					const button = document.createElement("button");
					button.type = "button";
					button.className = "btn btn-success";
					button.onclick = function(){
						sessionStorage.setItem('currentRoutineData', JSON.stringify(routine));
						window.location.href = "routine.html";
					};
					button.innerHTML = '<i class="bi bi-play-fill"></i>';
					
					listItem.appendChild(button);

					routineList.appendChild(listItem);
				});
			}

			populateTrainerInfo();
			populateRoutines();
		</script>

    </body>
</html>
